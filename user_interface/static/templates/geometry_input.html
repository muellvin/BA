<!DOCTYPE html>
<html lang="en">
<head>
    <title>Plate Buckling Optimizer</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/style.css') }}">
</head>
<body>

<div class="navbar">
  <a href="{{ url_for('index') }}">Startpage</a>
  <a href="{{ url_for('cs_analysis') }}">CS Analysis Tool</a>
  <a href="{{ url_for('optimize') }}">CS Optimization Tool</a>
</div>

<h1>CS Analysis Tool</h1>
<p>Please fill the following form.</p>
<p>{{ content["b_sup"] }}</p>

</div>


<div class="row">
  <div class="side">
    <form action="/cs_analysis_step_1" method="POST" id="step_1"></form>
    <p>Enter the cross section geometry. </p>
    <table>
      <tr>
        <td><label for="b_sup">b<sub>sup</sub> [mm]</label></td>
        <td><input type="number" name="b_sup" value = {{ content["b_sup"] }} form="step_1"></td>
      </tr>
      <tr>
        <td><label for="b_inf">b<sub>inf</sub> [mm]</label></td>
        <td><input type="number" name="b_inf" value = {{ content["b_inf"] }} form="step_1"></td>
      </tr>
      <tr>
        <td><label for="h">h [mm]</label></td>
        <td><input type="number" name="h" value = "2000" form="step_1"></td>
      </tr>
      <tr>
        <td><label for="t_side">t<sub>side</sub> [mm]</label></td>
        <td><input type="number" name="t_side" value = "10" form="step_1"></td>
      </tr>
      <tr>
        <td><label for="t_bottom">t<sub>bottom</sub> [mm]</label></td>
        <td><input type="number" name="t_bottom" value = "10" form="step_1"></td>
      </tr>
    </table>
    <br>
    <label for="side_stiffener_number">Choose the number of side stiffeners</label>
    <select name="side_stiffener_number" onchange="set_side(this.value)" form="step_1">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
    </select>
    <br>
    <br>
    <div id = "div1">
    </div>
    <script>
    function set_side(val) {
      const myNode = document.getElementById("div1");
      while (myNode.firstChild) {
        myNode.removeChild(myNode.lastChild);
      }
      var input_data = ["location", "b_sup", "b_inf", "h", "t"]
      var normal = ["location", "b", "b", "h", "t"]
      var subscripts = ["","sup", "inf", "", ""]
      var units = [" [-]", " [mm]", " [mm]", " [mm]", " [mm]"]
      var i;
      for (i = 1; i <= val; i++) {
        var para = document.createElement("P")
        var text = document.createTextNode("Stiffener " + (i));
        var element = document.getElementById("div1");
        para.appendChild(text)
        element.appendChild(para);
        var j;
        var table = document.createElement("table")
        for (j = 0; j <5; j++) {
          var tr = document.createElement("tr")
          var td1 = document.createElement("td")
          var td2 = document.createElement("td")
          var box = document.createElement("input");
          box.setAttribute("type", "text");
          box.setAttribute("name", input_data[j] + i);
          box.setAttribute("id", input_data[j] + i)
          var text = document.createTextNode(normal[j]);
          var sub = document.createElement("sub")
          var sub_text = document.createTextNode(subscripts[j])
          sub.appendChild(sub_text)
          var unit = document.createTextNode(units[j])
          var label = document.createElement("label");
          label.setAttribute("for", input_data[j] + i);
          label.appendChild(text);
          label.appendChild(sub)
          label.appendChild(unit)
          var br = document.createElement("br");
          var element = document.getElementById("div1");
          td1.appendChild(label);
          td2.appendChild(box);
          tr.appendChild(td1)
          tr.appendChild(td2)
          table.appendChild(tr)
        }
        var br = document.createElement("br");
        var element = document.getElementById("div1");
        element.appendChild(table);
      }
      var br = document.createElement("br");
      var element = document.getElementById("div1");
      element.appendChild(br);
    }
    </script>
    <label for="btm_stiffener_number">Choose the number of bottom stiffeners</label>
    <select name="btm_stiffener_number" onchange = "set_bottom(this.value)" form="step_1">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
    </select>
    <br>
    <br>
    <div id = "div2">
    </div>
    <script>
    function set_bottom(val) {
      const myNode = document.getElementById("div2");
      while (myNode.firstChild) {
        myNode.removeChild(myNode.lastChild);
      }
      var it;
      var first_field = false;
      if (val%2 == 0) {
        it = val/2;
      }
      else {
        first_field = true;
        it = val/2+0.5;
      }
      var input_data = ["location", "b_sup", "b_inf", "h", "t"]
      var normal = ["location", "b", "b", "h", "t"]
      var subscripts = ["","sup", "inf", "", ""]
      var units = [" [-]", " [mm]", " [mm]", " [mm]", " [mm]"]
      var i;
      for (i = 1; i <= it; i++) {
        var para = document.createElement("P")
        var text = document.createTextNode("Stiffener " + (i) );
        var element = document.getElementById("div2");
        para.appendChild(text)
        element.appendChild(para);
        var j;
        var table = document.createElement("table")
        for (j = 0; j <5; j++) {
          var tr = document.createElement("tr")
          var td1 = document.createElement("td")
          var td2 = document.createElement("td")
          var box = document.createElement("input");
          box.setAttribute("type", "text");
          box.setAttribute("name", input_data[j] + i);
          box.setAttribute("id", input_data[j] + i)
          if (first_field == true) {
            box.setAttribute("disabled", "disabled")
            box.setAttribute("value", "0")
          }
          first_field = false
          var text = document.createTextNode(normal[j]);
          var sub = document.createElement("sub")
          var sub_text = document.createTextNode(subscripts[j])
          sub.appendChild(sub_text)
          var unit = document.createTextNode(units[j])
          var label = document.createElement("label");
          label.setAttribute("for", input_data[j] + i);
          label.appendChild(text);
          label.appendChild(sub)
          label.appendChild(unit)
          var br = document.createElement("br");
          var element = document.getElementById("div2");
          td1.appendChild(label);
          td2.appendChild(box);
          tr.appendChild(td1)
          tr.appendChild(td2)
          table.appendChild(tr)
        }
        var br = document.createElement("br");
        var element = document.getElementById("div2");
        element.appendChild(table);
      }
      var br = document.createElement("br");
      var element = document.getElementById("div2");
      element.appendChild(br);
    }
    </script>
    <input type="submit" name="Draw" value="Draw" form="step_1">
    <input type="submit" name="Submit" value="Next" formaction="/cs_analysis_step_2" form="step_1">
    <br>
  </div>
  <div class="main">
    {{ image | safe }}
  </div>
</div>
</body>
</html>
